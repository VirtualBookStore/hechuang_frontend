{"remainingRequest":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\src\\components\\commonForUser\\PayOrders.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\src\\components\\commonForUser\\PayOrders.vue","mtime":1609290905033},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5lbC10YWJsZSAud2FybmluZy1yb3cgew0KICBiYWNrZ3JvdW5kOiBvbGRsYWNlOw0KfQ0KDQouZWwtdGFibGUgLnN1Y2Nlc3Mtcm93IHsNCiAgYmFja2dyb3VuZDogI2YwZjllYjsNCn0NCg0KLmZvcm1faGVhZGVyIHsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KfQ0KDQouYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQgew0KICBib3JkZXI6IDFweCBkYXNoZWQgI2Q5ZDlkOTsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCg0KLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkOmhvdmVyIHsNCiAgYm9yZGVyLWNvbG9yOiAjMjBhMGZmOw0KfQ0KDQouYXZhdGFyLXVwbG9hZGVyLWljb24gew0KICBmb250LXNpemU6IDI4cHg7DQogIGNvbG9yOiAjOGM5MzlkOw0KICB3aWR0aDogMTIwcHg7DQogIGhlaWdodDogMTIwcHg7DQogIGxpbmUtaGVpZ2h0OiAxMjBweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KDQouYXZhdGFyIHsNCiAgd2lkdGg6IDEyMHB4Ow0KICBoZWlnaHQ6IDEyMHB4Ow0KICBkaXNwbGF5OiBibG9jazsNCn0NCg0KLmVsLXRhYmxlIC5pbmZvLXJvdyB7DQogIGJhY2tncm91bmQ6ICNjOWU1ZjU7DQp9DQoNCi5lbC10YWJsZSAucG9zaXRpdmUtcm93IHsNCiAgYmFja2dyb3VuZDogI2UyZjBlNDsNCn0NCg=="},{"version":3,"sources":["PayOrders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"PayOrders.vue","sourceRoot":"src/components/commonForUser","sourcesContent":["<template>\r\n  <div class=\"book-info\">\r\n    <el-table :data=\"orders\" style=\"width: 100%\" border :stripe=\"true\">\r\n      <el-table-column prop=\"id\" label=\"订单编号\"></el-table-column>\r\n      <el-table-column prop=\"book.isbn\" label=\"ISBN\"></el-table-column>\r\n      <el-table-column prop=\"book.title\" label=\"书名\"></el-table-column>\r\n      <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n      <el-table-column prop=\"status\" label=\"订单状态\"></el-table-column>\r\n      <el-table-column\r\n        prop=\"time\"\r\n        label=\"订单创建时间\"\r\n        width=\"150px\"\r\n      ></el-table-column>\r\n      <!-- <el-table-column\r\n        prop='old'\r\n        label=\"新书/旧书\"\r\n      ></el-table-column> -->\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"small\"\r\n            @click=\"\r\n              editData(scope.$index, scope.row)\r\n              PayDialogVisible=true\r\n            \"\r\n            >支付</el-button\r\n          >\r\n\r\n          <el-dialog\r\n            title=\"确认收货提示\"\r\n            :visible.sync=\"PayDialogVisible\"\r\n            width=\"30%\"\r\n            center\r\n          >\r\n            <p>您要确定付款吗？</p>\r\n            <span>商品名称：{{ title }} 价格：{{ price }}</span>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"PayDialogVisible = false\"\r\n                >取消</el-button\r\n              >\r\n              <el-button\r\n                type=\"primary\"\r\n                @click=\"\r\n                  PayDialogVisible = false\r\n                  payOrder()\r\n                \"\r\n                >确认付款</el-button\r\n              >\r\n            </span>\r\n          </el-dialog>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      RoomForm: JSON.parse(window.sessionStorage.getItem('rea')),\r\n      pickerOptions: {},\r\n      orders: [],\r\n      title: '',\r\n      price: 0,\r\n      message: '',\r\n      status: '',\r\n      form: {},\r\n      PayDialogVisible: false,\r\n    }\r\n  },\r\n\r\n  mounted: function() {\r\n    var _this = this //很重要！！\r\n    this.$http\r\n      .get('/api/v1/order/')\r\n      .then(function(res) {\r\n        console.log('orders:', res.data)\r\n        for (let order in res.data) {\r\n          console.log(res.data[order])\r\n          if (res.data[order].status === '待支付') {\r\n            // console.log(order)\r\n            _this.orders.push(res.data[order])\r\n          }\r\n        }\r\n      })\r\n      .catch(function(error) {\r\n        console.log(error)\r\n      })\r\n  },\r\n  methods: {\r\n    editData(index, row) {\r\n      console.log('index:' + index)\r\n      this.form = this.orders[index]\r\n      console.log(this.form)\r\n      this.title = this.form['book'].title\r\n      this.price = this.form['book'].price\r\n      this.status = this.form['status']\r\n      console.log(this.status)\r\n    },\r\n\r\n    payOrder() {\r\n      this.$http\r\n        .patch('/api/v1/order/' + this.form.id + '/pay/')\r\n        .then((res) => {\r\n          console.log(res.data)\r\n          location.reload();\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error)\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.el-table .warning-row {\r\n  background: oldlace;\r\n}\r\n\r\n.el-table .success-row {\r\n  background: #f0f9eb;\r\n}\r\n\r\n.form_header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #20a0ff;\r\n}\r\n\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n\r\n.avatar {\r\n  width: 120px;\r\n  height: 120px;\r\n  display: block;\r\n}\r\n\r\n.el-table .info-row {\r\n  background: #c9e5f5;\r\n}\r\n\r\n.el-table .positive-row {\r\n  background: #e2f0e4;\r\n}\r\n</style>\r\n"]}]}