{"remainingRequest":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\src\\components\\commonForUser\\PayOrders.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\src\\components\\commonForUser\\PayOrders.vue","mtime":1609290905033},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIFJvb21Gb3JtOiBKU09OLnBhcnNlKHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdyZWEnKSksDQogICAgICBwaWNrZXJPcHRpb25zOiB7fSwNCiAgICAgIG9yZGVyczogW10sDQogICAgICB0aXRsZTogJycsDQogICAgICBwcmljZTogMCwNCiAgICAgIG1lc3NhZ2U6ICcnLA0KICAgICAgc3RhdHVzOiAnJywNCiAgICAgIGZvcm06IHt9LA0KICAgICAgUGF5RGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgfQ0KICB9LA0KDQogIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgew0KICAgIHZhciBfdGhpcyA9IHRoaXMgLy/lvojph43opoHvvIHvvIENCiAgICB0aGlzLiRodHRwDQogICAgICAuZ2V0KCcvYXBpL3YxL29yZGVyLycpDQogICAgICAudGhlbihmdW5jdGlvbihyZXMpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ29yZGVyczonLCByZXMuZGF0YSkNCiAgICAgICAgZm9yIChsZXQgb3JkZXIgaW4gcmVzLmRhdGEpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YVtvcmRlcl0pDQogICAgICAgICAgaWYgKHJlcy5kYXRhW29yZGVyXS5zdGF0dXMgPT09ICflvoXmlK/ku5gnKSB7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvcmRlcikNCiAgICAgICAgICAgIF90aGlzLm9yZGVycy5wdXNoKHJlcy5kYXRhW29yZGVyXSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICB9KQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZWRpdERhdGEoaW5kZXgsIHJvdykgew0KICAgICAgY29uc29sZS5sb2coJ2luZGV4OicgKyBpbmRleCkNCiAgICAgIHRoaXMuZm9ybSA9IHRoaXMub3JkZXJzW2luZGV4XQ0KICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtKQ0KICAgICAgdGhpcy50aXRsZSA9IHRoaXMuZm9ybVsnYm9vayddLnRpdGxlDQogICAgICB0aGlzLnByaWNlID0gdGhpcy5mb3JtWydib29rJ10ucHJpY2UNCiAgICAgIHRoaXMuc3RhdHVzID0gdGhpcy5mb3JtWydzdGF0dXMnXQ0KICAgICAgY29uc29sZS5sb2codGhpcy5zdGF0dXMpDQogICAgfSwNCg0KICAgIHBheU9yZGVyKCkgew0KICAgICAgdGhpcy4kaHR0cA0KICAgICAgICAucGF0Y2goJy9hcGkvdjEvb3JkZXIvJyArIHRoaXMuZm9ybS5pZCArICcvcGF5LycpDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSkNCiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICAgIH0pDQogICAgfSwNCiAgfSwNCn0NCg=="},{"version":3,"sources":["PayOrders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PayOrders.vue","sourceRoot":"src/components/commonForUser","sourcesContent":["<template>\r\n  <div class=\"book-info\">\r\n    <el-table :data=\"orders\" style=\"width: 100%\" border :stripe=\"true\">\r\n      <el-table-column prop=\"id\" label=\"订单编号\"></el-table-column>\r\n      <el-table-column prop=\"book.isbn\" label=\"ISBN\"></el-table-column>\r\n      <el-table-column prop=\"book.title\" label=\"书名\"></el-table-column>\r\n      <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n      <el-table-column prop=\"status\" label=\"订单状态\"></el-table-column>\r\n      <el-table-column\r\n        prop=\"time\"\r\n        label=\"订单创建时间\"\r\n        width=\"150px\"\r\n      ></el-table-column>\r\n      <!-- <el-table-column\r\n        prop='old'\r\n        label=\"新书/旧书\"\r\n      ></el-table-column> -->\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"small\"\r\n            @click=\"\r\n              editData(scope.$index, scope.row)\r\n              PayDialogVisible=true\r\n            \"\r\n            >支付</el-button\r\n          >\r\n\r\n          <el-dialog\r\n            title=\"确认收货提示\"\r\n            :visible.sync=\"PayDialogVisible\"\r\n            width=\"30%\"\r\n            center\r\n          >\r\n            <p>您要确定付款吗？</p>\r\n            <span>商品名称：{{ title }} 价格：{{ price }}</span>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"PayDialogVisible = false\"\r\n                >取消</el-button\r\n              >\r\n              <el-button\r\n                type=\"primary\"\r\n                @click=\"\r\n                  PayDialogVisible = false\r\n                  payOrder()\r\n                \"\r\n                >确认付款</el-button\r\n              >\r\n            </span>\r\n          </el-dialog>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      RoomForm: JSON.parse(window.sessionStorage.getItem('rea')),\r\n      pickerOptions: {},\r\n      orders: [],\r\n      title: '',\r\n      price: 0,\r\n      message: '',\r\n      status: '',\r\n      form: {},\r\n      PayDialogVisible: false,\r\n    }\r\n  },\r\n\r\n  mounted: function() {\r\n    var _this = this //很重要！！\r\n    this.$http\r\n      .get('/api/v1/order/')\r\n      .then(function(res) {\r\n        console.log('orders:', res.data)\r\n        for (let order in res.data) {\r\n          console.log(res.data[order])\r\n          if (res.data[order].status === '待支付') {\r\n            // console.log(order)\r\n            _this.orders.push(res.data[order])\r\n          }\r\n        }\r\n      })\r\n      .catch(function(error) {\r\n        console.log(error)\r\n      })\r\n  },\r\n  methods: {\r\n    editData(index, row) {\r\n      console.log('index:' + index)\r\n      this.form = this.orders[index]\r\n      console.log(this.form)\r\n      this.title = this.form['book'].title\r\n      this.price = this.form['book'].price\r\n      this.status = this.form['status']\r\n      console.log(this.status)\r\n    },\r\n\r\n    payOrder() {\r\n      this.$http\r\n        .patch('/api/v1/order/' + this.form.id + '/pay/')\r\n        .then((res) => {\r\n          console.log(res.data)\r\n          location.reload();\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error)\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.el-table .warning-row {\r\n  background: oldlace;\r\n}\r\n\r\n.el-table .success-row {\r\n  background: #f0f9eb;\r\n}\r\n\r\n.form_header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #20a0ff;\r\n}\r\n\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n\r\n.avatar {\r\n  width: 120px;\r\n  height: 120px;\r\n  display: block;\r\n}\r\n\r\n.el-table .info-row {\r\n  background: #c9e5f5;\r\n}\r\n\r\n.el-table .positive-row {\r\n  background: #e2f0e4;\r\n}\r\n</style>\r\n"]}]}