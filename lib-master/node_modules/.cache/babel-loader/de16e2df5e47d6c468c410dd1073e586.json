{"remainingRequest":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\babel-loader\\lib\\index.js!F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\src\\components\\commonForUser\\PayOrders.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\src\\components\\commonForUser\\PayOrders.vue","mtime":1609290905033},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hechuang_backend-main\\hehchuang_frontend\\lib-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBSb29tRm9ybTogSlNPTi5wYXJzZSh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncmVhJykpLAogICAgICBwaWNrZXJPcHRpb25zOiB7fSwKICAgICAgb3JkZXJzOiBbXSwKICAgICAgdGl0bGU6ICcnLAogICAgICBwcmljZTogMCwKICAgICAgbWVzc2FnZTogJycsCiAgICAgIHN0YXR1czogJycsCiAgICAgIGZvcm06IHt9LAogICAgICBQYXlEaWFsb2dWaXNpYmxlOiBmYWxzZQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOyAvL+W+iOmHjeimge+8ge+8gQoKCiAgICB0aGlzLiRodHRwLmdldCgnL2FwaS92MS9vcmRlci8nKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgY29uc29sZS5sb2coJ29yZGVyczonLCByZXMuZGF0YSk7CgogICAgICBmb3IgKHZhciBvcmRlciBpbiByZXMuZGF0YSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhW29yZGVyXSk7CgogICAgICAgIGlmIChyZXMuZGF0YVtvcmRlcl0uc3RhdHVzID09PSAn5b6F5pSv5LuYJykgewogICAgICAgICAgLy8gY29uc29sZS5sb2cob3JkZXIpCiAgICAgICAgICBfdGhpcy5vcmRlcnMucHVzaChyZXMuZGF0YVtvcmRlcl0pOwogICAgICAgIH0KICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgZWRpdERhdGE6IGZ1bmN0aW9uIGVkaXREYXRhKGluZGV4LCByb3cpIHsKICAgICAgY29uc29sZS5sb2coJ2luZGV4OicgKyBpbmRleCk7CiAgICAgIHRoaXMuZm9ybSA9IHRoaXMub3JkZXJzW2luZGV4XTsKICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtKTsKICAgICAgdGhpcy50aXRsZSA9IHRoaXMuZm9ybVsnYm9vayddLnRpdGxlOwogICAgICB0aGlzLnByaWNlID0gdGhpcy5mb3JtWydib29rJ10ucHJpY2U7CiAgICAgIHRoaXMuc3RhdHVzID0gdGhpcy5mb3JtWydzdGF0dXMnXTsKICAgICAgY29uc29sZS5sb2codGhpcy5zdGF0dXMpOwogICAgfSwKICAgIHBheU9yZGVyOiBmdW5jdGlvbiBwYXlPcmRlcigpIHsKICAgICAgdGhpcy4kaHR0cC5wYXRjaCgnL2FwaS92MS9vcmRlci8nICsgdGhpcy5mb3JtLmlkICsgJy9wYXkvJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["PayOrders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,cAAA,CAAA,OAAA,CAAA,KAAA,CAAA,CADA;AAEA,MAAA,aAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA,EAJA;AAKA,MAAA,KAAA,EAAA,CALA;AAMA,MAAA,OAAA,EAAA,EANA;AAOA,MAAA,MAAA,EAAA,EAPA;AAQA,MAAA,IAAA,EAAA,EARA;AASA,MAAA,gBAAA,EAAA;AATA,KAAA;AAWA,GAbA;AAeA,EAAA,OAAA,EAAA,mBAAA;AACA,QAAA,KAAA,GAAA,IAAA,CADA,CACA;;;AACA,SAAA,KAAA,CACA,GADA,CACA,gBADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,SAAA,EAAA,GAAA,CAAA,IAAA;;AACA,WAAA,IAAA,KAAA,IAAA,GAAA,CAAA,IAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,KAAA,EAAA,MAAA,KAAA,KAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA;AACA;AACA,KAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,KAdA;AAeA,GAhCA;AAiCA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,KADA,EACA,GADA,EACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,WAAA,KAAA;AACA,WAAA,IAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,IAAA;AACA,WAAA,KAAA,GAAA,KAAA,IAAA,CAAA,MAAA,EAAA,KAAA;AACA,WAAA,KAAA,GAAA,KAAA,IAAA,CAAA,MAAA,EAAA,KAAA;AACA,WAAA,MAAA,GAAA,KAAA,IAAA,CAAA,QAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,MAAA;AACA,KATA;AAWA,IAAA,QAXA,sBAWA;AACA,WAAA,KAAA,CACA,KADA,CACA,mBAAA,KAAA,IAAA,CAAA,EAAA,GAAA,OADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;AACA,QAAA,QAAA,CAAA,MAAA;AACA,OALA,EAMA,KANA,CAMA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OARA;AASA;AArBA;AAjCA,CAAA","sourcesContent":["<template>\r\n  <div class=\"book-info\">\r\n    <el-table :data=\"orders\" style=\"width: 100%\" border :stripe=\"true\">\r\n      <el-table-column prop=\"id\" label=\"订单编号\"></el-table-column>\r\n      <el-table-column prop=\"book.isbn\" label=\"ISBN\"></el-table-column>\r\n      <el-table-column prop=\"book.title\" label=\"书名\"></el-table-column>\r\n      <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n      <el-table-column prop=\"status\" label=\"订单状态\"></el-table-column>\r\n      <el-table-column\r\n        prop=\"time\"\r\n        label=\"订单创建时间\"\r\n        width=\"150px\"\r\n      ></el-table-column>\r\n      <!-- <el-table-column\r\n        prop='old'\r\n        label=\"新书/旧书\"\r\n      ></el-table-column> -->\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"small\"\r\n            @click=\"\r\n              editData(scope.$index, scope.row)\r\n              PayDialogVisible=true\r\n            \"\r\n            >支付</el-button\r\n          >\r\n\r\n          <el-dialog\r\n            title=\"确认收货提示\"\r\n            :visible.sync=\"PayDialogVisible\"\r\n            width=\"30%\"\r\n            center\r\n          >\r\n            <p>您要确定付款吗？</p>\r\n            <span>商品名称：{{ title }} 价格：{{ price }}</span>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"PayDialogVisible = false\"\r\n                >取消</el-button\r\n              >\r\n              <el-button\r\n                type=\"primary\"\r\n                @click=\"\r\n                  PayDialogVisible = false\r\n                  payOrder()\r\n                \"\r\n                >确认付款</el-button\r\n              >\r\n            </span>\r\n          </el-dialog>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      RoomForm: JSON.parse(window.sessionStorage.getItem('rea')),\r\n      pickerOptions: {},\r\n      orders: [],\r\n      title: '',\r\n      price: 0,\r\n      message: '',\r\n      status: '',\r\n      form: {},\r\n      PayDialogVisible: false,\r\n    }\r\n  },\r\n\r\n  mounted: function() {\r\n    var _this = this //很重要！！\r\n    this.$http\r\n      .get('/api/v1/order/')\r\n      .then(function(res) {\r\n        console.log('orders:', res.data)\r\n        for (let order in res.data) {\r\n          console.log(res.data[order])\r\n          if (res.data[order].status === '待支付') {\r\n            // console.log(order)\r\n            _this.orders.push(res.data[order])\r\n          }\r\n        }\r\n      })\r\n      .catch(function(error) {\r\n        console.log(error)\r\n      })\r\n  },\r\n  methods: {\r\n    editData(index, row) {\r\n      console.log('index:' + index)\r\n      this.form = this.orders[index]\r\n      console.log(this.form)\r\n      this.title = this.form['book'].title\r\n      this.price = this.form['book'].price\r\n      this.status = this.form['status']\r\n      console.log(this.status)\r\n    },\r\n\r\n    payOrder() {\r\n      this.$http\r\n        .patch('/api/v1/order/' + this.form.id + '/pay/')\r\n        .then((res) => {\r\n          console.log(res.data)\r\n          location.reload();\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error)\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.el-table .warning-row {\r\n  background: oldlace;\r\n}\r\n\r\n.el-table .success-row {\r\n  background: #f0f9eb;\r\n}\r\n\r\n.form_header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #20a0ff;\r\n}\r\n\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n\r\n.avatar {\r\n  width: 120px;\r\n  height: 120px;\r\n  display: block;\r\n}\r\n\r\n.el-table .info-row {\r\n  background: #c9e5f5;\r\n}\r\n\r\n.el-table .positive-row {\r\n  background: #e2f0e4;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/commonForUser"}]}